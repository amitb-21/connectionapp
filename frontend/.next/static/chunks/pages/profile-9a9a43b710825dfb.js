(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{1280:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(7876);s(4232);var n=s(9099),r=s(1777),i=s(2431),l=s(6610),o=s.n(l);function c(){let e=(0,n.useRouter)(),t=(0,r.wA)(),{user:s,loggedIn:l}=(0,r.d4)(e=>e.auth);return(0,a.jsx)("div",{className:o().container,children:(0,a.jsxs)("div",{className:o().navbar,children:[(0,a.jsx)("div",{className:o().logo,onClick:()=>e.push("/"),children:"Pro Connect"}),(0,a.jsx)("div",{className:o().navbarOptions,children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:o().userSection,children:[(0,a.jsxs)("span",{className:o().userName,children:["Hey, ",(null==s?void 0:s.name)||"User"]}),(0,a.jsx)("span",{className:o().profileLink,onClick:()=>e.push("/profile"),children:"Profile"})]}),(0,a.jsx)("button",{onClick:()=>{t((0,i.y4)()),e.push("/")},className:o().buttonLogout,children:"Logout"})]}):(0,a.jsx)("button",{onClick:()=>e.push("/login"),className:o().buttonJoin,children:"Be a part"})})]})})}let u=function(e){let{children:t}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)(c,{}),t]})}},4725:e=>{e.exports={profileContainer:"styles_profileContainer__7wIfi",profileImageSection:"styles_profileImageSection__q39Iu",imageContainer:"styles_imageContainer__kRsNW",placeholderImage:"styles_placeholderImage__gZUR2",formSection:"styles_formSection__ofmrc",formGroup:"styles_formGroup__Pm94T",error:"styles_error__O1ew1",educationItem:"styles_educationItem__JXafC",experienceItem:"styles_experienceItem__inj2T",yearInputs:"styles_yearInputs__kyhbL",submitButton:"styles_submitButton__GQwA_"}},6382:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=s(7876),n=s(4232),r=s(1777),i=s(9099),l=s(8992),o=s(3810),c=s(6381),u=s(2431),d=s(1280),p=s(4725),m=s.n(p),h=s(1436);let x=c.Ik({name:c.Yj().min(2,"Name must be at least 2 characters"),bio:c.Yj().optional(),currentPost:c.Yj().optional(),skills:c.Yj().optional()});function _(){var e;let t=(0,r.wA)();(0,i.useRouter)();let{user:s,profile:c,isLoading:p}=(0,r.d4)(e=>e.auth),_=(0,n.useRef)(null),[j,f]=n.useState(null),[g,v]=n.useState(""),[y,b]=n.useState([]),[N,C]=n.useState([]),[k,P]=n.useState(""),{register:S,handleSubmit:Y,setValue:I,formState:{errors:w}}=(0,l.mN)({resolver:(0,o.u)(x),defaultValues:{name:"",bio:"",currentPost:"",skills:""}});(0,n.useEffect)(()=>{s&&c&&(I("name",s.name||""),I("bio",c.bio||""),I("currentPost",c.currentPost||""),I("skills",c.skills?c.skills.join(", "):""),b(c.education||[]),C(c.experience||[]))},[s,c,I]);let E=async e=>{try{P("Uploading...");let s=new FormData;s.append("profile_picture",e);let a=await t((0,u.x)(s));"fulfilled"===a.meta.requestStatus?(P("Upload successful!"),setTimeout(()=>P(""),3e3)):P("Upload failed. Please try again.")}catch(e){console.error("Error uploading image:",e),P("Upload failed. Please try again.")}},U=(e,t,s)=>{let a=[...y];a[e][t]=s,b(a)},L=(e,t,s)=>{let a=[...N];a[e][t]=s,C(a)},B=async e=>{if(await t((0,u.eg)({name:e.name,bio:e.bio,currentPost:e.currentPost})),await t((0,u.fL)({education:y,experience:N,skills:e.skills.split(",").map(e=>e.trim()).filter(e=>e)})),j&&"Upload successful!"!==k){let e=new FormData;e.append("profile_picture",j),await t((0,u.x)(e))}};return s&&c?(0,a.jsx)(d.A,{children:(0,a.jsxs)("div",{className:m().profileContainer,children:[(0,a.jsx)("h1",{children:"My Profile"}),(0,a.jsxs)("form",{onSubmit:Y(B),children:[(0,a.jsxs)("div",{className:m().profileImageSection,children:[(0,a.jsxs)("div",{className:m().imageContainer,onClick:()=>_.current.click(),style:{cursor:"pointer"},children:[g||s.profilePicture?(0,a.jsx)("img",{src:g||"".concat(h.C,"/uploads/").concat(s.profilePicture,"?v=").concat(new Date().getTime()),alt:"".concat(s.name,"'s profile"),style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"},onError:e=>{e.target.src="/images/default-profile.png"}},s.profilePicture):(0,a.jsx)("div",{className:m().placeholderImage,children:(null===(e=s.name)||void 0===e?void 0:e.charAt(0))||"U"}),(0,a.jsx)("div",{className:m().imageOverlay,children:(0,a.jsx)("span",{children:"Change Photo"})})]}),(0,a.jsx)("input",{type:"file",ref:_,onChange:e=>{let t=e.target.files[0];t&&(f(t),v(URL.createObjectURL(t)),E(t))},accept:"image/*",style:{display:"none"}}),k&&(0,a.jsx)("div",{className:m().uploadStatus,children:k})]}),(0,a.jsxs)("div",{className:m().formSection,children:[(0,a.jsx)("h2",{children:"Basic Information"}),(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsx)("label",{children:"Name"}),(0,a.jsx)("input",{...S("name")}),w.name&&(0,a.jsx)("span",{className:m().error,children:w.name.message})]}),(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsx)("label",{children:"Bio"}),(0,a.jsx)("textarea",{...S("bio")}),w.bio&&(0,a.jsx)("span",{className:m().error,children:w.bio.message})]}),(0,a.jsxs)("div",{className:m().formGroup,children:[(0,a.jsx)("label",{children:"Current Position"}),(0,a.jsx)("input",{...S("currentPost")}),w.currentPost&&(0,a.jsx)("span",{className:m().error,children:w.currentPost.message})]})]}),(0,a.jsxs)("div",{className:m().formSection,children:[(0,a.jsx)("h2",{children:"Education"}),y.map((e,t)=>(0,a.jsxs)("div",{className:m().educationItem,children:[(0,a.jsx)("input",{type:"text",placeholder:"Institution",value:e.institution,onChange:e=>U(t,"institution",e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Degree",value:e.degree,onChange:e=>U(t,"degree",e.target.value)}),(0,a.jsxs)("div",{className:m().yearInputs,children:[(0,a.jsx)("input",{type:"text",placeholder:"Start Year",value:e.startYear,onChange:e=>U(t,"startYear",e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"End Year",value:e.endYear,onChange:e=>U(t,"endYear",e.target.value)})]})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>{b([...y,{institution:"",degree:"",startYear:"",endYear:""}])},className:m().addButton,children:"Add Education"})]}),(0,a.jsxs)("div",{className:m().formSection,children:[(0,a.jsx)("h2",{children:"Experience"}),N.map((e,t)=>(0,a.jsxs)("div",{className:m().experienceItem,children:[(0,a.jsx)("input",{type:"text",placeholder:"Company",value:e.company,onChange:e=>L(t,"company",e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"Position",value:e.position,onChange:e=>L(t,"position",e.target.value)}),(0,a.jsxs)("div",{className:m().yearInputs,children:[(0,a.jsx)("input",{type:"text",placeholder:"Start Year",value:e.startYear,onChange:e=>L(t,"startYear",e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"End Year",value:e.endYear,onChange:e=>L(t,"endYear",e.target.value)})]}),(0,a.jsx)("textarea",{placeholder:"Description",value:e.description,onChange:e=>L(t,"description",e.target.value)})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>{C([...N,{company:"",position:"",startYear:"",endYear:"",description:""}])},className:m().addButton,children:"Add Experience"})]}),(0,a.jsxs)("div",{className:m().formSection,children:[(0,a.jsx)("h2",{children:"Skills"}),(0,a.jsx)("textarea",{...S("skills"),placeholder:"Enter skills separated by commas"}),w.skills&&(0,a.jsx)("span",{className:m().error,children:w.skills.message})]}),(0,a.jsx)("button",{type:"submit",className:m().submitButton,disabled:p,children:p?"Updating...":"Update Profile"})]})]})}):(0,a.jsx)("div",{children:"Loading profile..."})}},6610:e=>{e.exports={container:"styles_container__WCP1D",navbar:"styles_navbar__16R5U",logo:"styles_logo__HBouD",navbarOptions:"styles_navbarOptions__fbl7O",userSection:"styles_userSection__K1Yhl",userName:"styles_userName__xf9_E",profileLink:"styles_profileLink____x7y",buttonJoin:"styles_buttonJoin__hW__U",buttonLogout:"styles_buttonLogout__SY8h5"}},9275:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(6382)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[411,636,593,792],()=>t(9275)),_N_E=e.O()}]);